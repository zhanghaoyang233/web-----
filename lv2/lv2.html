<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style type="text/css">
        .layerWrap {
            transform-style: preserve-3d;
        }
        
        .banner-row .layer {
            position: absolute;
        }
        
        .banner-row .layer img {
            width: 800px;
        }
        
        .banner-row {
            position: absolute;
            left: 350px;
            width: 800px;
            height: 1000px;
            margin: 0 auto;
            display: inline;
        }
        
        #div1 {
            width: 100px;
            height: 30px;
            float: left;
            display: inline;
        }
        
        #masterdiv {
            width: 100px;
            height: 20px;
            float: right;
            display: inline;
            margin-top: -100px;
            background-color: deeppink;
        }
        
        #div {
            width: 100%;
            height: 1000px;
        }
        
        #sub1 {
            display: none;
        }
        
        a {
            text-decoration: none;
            color: black;
        }
        
        p {
            display: inline;
        }
    </style>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>

<body>
    <div id="div">

        <div data-base-layer class="layerWrap">
            <div class="banner-row">
                <div class="layer right-image no-transition" data-zindex="50" style="transform: translateZ(50px);">
                    <img src="../lv2/images/1.jpg" alt="">
                </div>
                <div class="layer right-image no-transition" data-zindex="100" style="transform: translateZ(100px);">
                    <img src="../lv2/images/2.jpg" alt="">
                </div>
                <div class="layer right-image no-transition" data-zindex="150" style="transform: translateZ(150px);">
                    <img src="../lv2/images/3.jpg" alt="">
                </div>
            </div>
        </div>
        <div id="div1">
            <input type="button" value="改变主题颜色" id="input1">
        </div>

        <br>
        <br>
        <br>
        <br>
        <br>
        <p id="p1">23333333333333333333333333333333333333333333333333333</p>
        <div id="masterdiv">
            <div class="menutitle" onclick="SwitchMenu('sub1')">改变字体大小</div>
            <span class="submenu" id="sub1">
        - <a href="#" id="a1">10px</a><br>
        - <a href="#" id="a2">20px</a><br>
        - <a href="#" id="a3">30px</a><br>
        - <a href="#" id="a4">40px</a>
        </span>

        </div>
    </div>

    <script type="text/javascript">
        $(function() {
            //获取元素相对于屏幕绝对位置
            function getAbsPosition(element) {
                var abs = {
                        x: 0,
                        y: 0
                    }
                    //如果浏览器兼容此方法
                if (document.documentElement.getBoundingClientRect) {
                    //如果不用jQuery对象，可以使用else分支。
                    abs.x = element.getBoundingClientRect().left;
                    abs.y = element.getBoundingClientRect().top;

                    abs.x += window.screenLeft +
                        document.documentElement.scrollLeft -
                        document.documentElement.clientLeft;
                    abs.y += window.screenTop +
                        document.documentElement.scrollTop -
                        document.documentElement.clientTop;
                }
                //如果浏览器不兼容此方法
                else {
                    while (element != document.body) {
                        abs.x += element.offsetLeft;
                        abs.y += element.offsetTop;
                        element = element.offsetParent;
                    }
                    //计算想对位置
                    abs.x += window.screenLeft +
                        document.body.clientLeft - document.body.scrollLeft;
                    abs.y += window.screenTop +
                        document.body.clientTop - document.body.scrollTop;
                }
                return abs;
            }
            //获取元素中心点相对于屏幕的位移
            function getCenterPosition(element) {
                center = {
                    x: 0,
                    y: 0
                }
                var leftTop = getAbsPosition(element[0])
                    // console.log(leftTop)
                    // console.log(element.css('width'),element.css('height'))
                center.x = leftTop.x + parseInt(element.css('width')) / 2
                center.y = leftTop.y + parseInt(element.css('height')) / 2
                return center
            }
            console.log(getCenterPosition($('.layer img')))
            $(document).on('mousemove', '.layerWrap', function(e) {
                //console.log(e.clientX,e.clientY)
                CenterPosition = getCenterPosition($('.layer img'))
                moveY = (CenterPosition.x - e.clientX) / 30
                moveX = 0 - (CenterPosition.y - e.clientY) / 27
                    //console.log(moveX,moveY)
                $('.layerWrap').css('transform', 'rotateX(' + moveX + 'deg)' + '' + 'rotateY(' + moveY + 'deg)')
                $('.layerWrap').css('webKitTransform', 'rotateX(' + moveX + 'deg)' + '' + 'rotateY(' + moveY + 'deg)')
            })

        })

        function SwitchMenu(obj) {
            if (document.getElementById) {
                var el = document.getElementById(obj);

                var ar = document.getElementById("masterdiv").getElementsByTagName("span"); //DynamicDrive.com change
                if (el.style.display != "block") { //DynamicDrive.com change
                    for (var i = 0; i < ar.length; i++) {

                        if (ar[i].className == "submenu") //DynamicDrive.com change
                            ar[i].style.display = "none";
                    }
                    el.style.display = "block";
                } else {
                    el.style.display = "none";
                }
            }
        }
        var int1 = document.getElementById("input1");
        var int2 = document.getElementById("a1");
        var int3 = document.getElementById("a2");
        var int4 = document.getElementById("a3");
        var int5 = document.getElementById("a4");
        int1.addEventListener("click", function() {

            var alls = document.getElementById("div");
            alls.style.backgroundColor = "pink";

        })
        int2.addEventListener("click", function() {

            var alls = document.getElementById("p1");
            alls.style.fontSize = "10px";

        })
        int3.addEventListener("click", function() {

            var alls = document.getElementById("p1");
            alls.style.fontSize = "20px";

        })
        int4.addEventListener("click", function() {

            var alls = document.getElementById("p1");
            alls.style.fontSize = "30px";

        })
        int5.addEventListener("click", function() {

            var alls = document.getElementById("p1");
            alls.style.fontSize = "40px";

        })
    </script>
</body>

</html>